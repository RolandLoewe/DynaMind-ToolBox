FILE(GLOB MODULE_CPPS *.cpp)
FILE(GLOB MODULE_H *.h)
FILE(GLOB MODULE_UI_FILES *.ui)

SET(LIBRARY_OUTPUT_PATH ${DYNAMIND_TOOLBOX_BUILD_DIR}/SqliteExtension)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
INCLUDE_DIRECTORIES(${GDAL_INCLUDE_DIR})
INCLUDE_DIRECTORIES( ${DYNAMIND_EXTENSIONS_INCLUDE_DIR})
INCLUDE_DIRECTORIES( ${SFCGAL_INCLUDE_DIR})

ADD_LIBRARY(dm_sqlite_plugin SHARED ${MODULE_CPPS} ${MODULE_H})

IF(APPLE)
IF(USEQT5)
	TARGET_LINK_LIBRARIES(dm_sqlite_plugin ${SQLITE3_LIBRARY} Qt5::Core ${SFCGAL_LIBRARY} ${CGAL_LIBRARIES} ${CGAL_3RD_PARTY_LIBRARIES} ${Boost_LIBRARIES})
ELSE()
	TARGET_LINK_LIBRARIES(dm_sqlite_plugin  ${QT_LIBRARIES} ${SFCGAL_LIBRARY} ${CGAL_LIBRARIES} ${CGAL_3RD_PARTY_LIBRARIES} ${Boost_LIBRARIES})
ENDIF()
ELSE()

IF(USEQT5)
        TARGET_LINK_LIBRARIES(dm_sqlite_plugin ${SQLITE3_LIBRARY} Qt5::Core ${CGAL_3RD_PARTY_LIBRARIES} ${Boost_LIBRARIES})
ELSE()
        TARGET_LINK_LIBRARIES(dm_sqlite_plugin ${SQLITE3_LIBRARY} ${QT_LIBRARIES} )
ENDIF()
ENDIF()
INSTALL(TARGETS dm_sqlite_plugin
		DESTINATION "share/DynaMind/SqliteExtension"
		PERMISSIONS OWNER_WRITE OWNER_READ OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)


