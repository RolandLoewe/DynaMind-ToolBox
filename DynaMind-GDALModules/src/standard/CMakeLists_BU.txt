FILE(GLOB MODULE_CPPS *.cpp *.c)
FILE(GLOB MODULE_H *.h)
FILE(GLOB MODULE_UI_FILES *.ui)
FILE(GLOB MODULE_CPPS_mux *.cpp ../../3rdparty/muparserx/parser/*.cpp)

IF(USEQT5)
	QT5_WRAP_UI(MODULE_CPPS ${MODULE_UI_FILES})
	QT5_WRAP_CPP(MODULE_CPPS ${MOC_MODULE_FILES})
ELSE()
	QT4_WRAP_UI(MODULE_CPPS ${MODULE_UI_FILES})
	QT4_WRAP_CPP(MODULE_CPPS ${MOC_MODULE_FILES})
ENDIF()


INCLUDE_DIRECTORIES(../../3rdparty/muparserx)


INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
INCLUDE_DIRECTORIES(${GDAL_INCLUDE_DIR})
INCLUDE_DIRECTORIES( ${DYNAMIND_EXTENSIONS_INCLUDE_DIR})
INCLUDE_DIRECTORIES( ${SFCGAL_INCLUDE_DIR})
#INCLUDE_DIRECTORIES( ${SQLITE3_INCLUDE_DIR})



ADD_LIBRARY(gdal_standard_modules SHARED ${MODULE_CPPS} ${MODULE_H}  ${MODULE_CPPS_mux})

SET_TARGET_PROPERTIES(gdal_standard_modules PROPERTIES AUTOMOC TRUE)

IF(${CMAKE_CXX_COMPILER_ID} STREQUAL GNU)
        SET_TARGET_PROPERTIES(gdal_standard_modules  PROPERTIES COMPILE_FLAGS "-frounding-math -fPIC")
ENDIF()

IF(APPLE)
IF(USEQT5)
	TARGET_LINK_LIBRARIES(gdal_standard_modules  Qt5::Core Qt5::Gui Qt5::Widgets ${SQLITE3_LIBRARY} ${DYNAMIND_TOOLBOX_LIBRARY} ${DYNAMIND_EXTENSIONS_LIBRARY} ${DYNAMIND_CORE_LIBRARY} ${GDAL_LIBRARY} ${SFCGAL_LIBRARY})
ELSE()
	TARGET_LINK_LIBRARIES(gdal_standard_modules sqlite3_dm ${DYNAMIND_TOOLBOX_LIBRARY} ${DYNAMIND_EXTENSIONS_LIBRARY} ${DYNAMIND_CORE_LIBRARY} ${QT_LIBRARIES} ${GDAL_LIBRARY} ${SFCGAL_LIBRARY})
ENDIF()
ELSE()
IF(USEQT5)
	TARGET_LINK_LIBRARIES(gdal_standard_modules  Qt5::Core Qt5::Gui Qt5::Widgets sqlite3_dm ${DYNAMIND_TOOLBOX_LIBRARY} ${DYNAMIND_EXTENSIONS_LIBRARY} ${DYNAMIND_CORE_LIBRARY} ${GDAL_LIBRARY} ${SFCGAL_LIBRARY})
ELSE()
	TARGET_LINK_LIBRARIES(gdal_standard_modules sqlite3_dm ${DYNAMIND_TOOLBOX_LIBRARY} ${DYNAMIND_EXTENSIONS_LIBRARY} ${DYNAMIND_CORE_LIBRARY} ${QT_LIBRARIES} ${GDAL_LIBRARY} ${SFCGAL_LIBRARY})
ENDIF()
ENDIF()
INSTALL(TARGETS gdal_standard_modules
		DESTINATION "share/DynaMind/Modules"
		PERMISSIONS OWNER_WRITE OWNER_READ OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)



